<Application x:Class="STLLayouts.WpfApp.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:STLLayouts.WpfApp"
             xmlns:converters="clr-namespace:STLLayouts.WpfApp.Converters"
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
             xmlns:theming="clr-namespace:STLLayouts.WpfApp.Theming">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Telerik.Windows.Themes.Fluent;component/Themes/System.Windows.xaml" />
                <ResourceDictionary Source="/Telerik.Windows.Themes.Fluent;component/Themes/Telerik.Windows.Controls.xaml" />
                <ResourceDictionary Source="/Telerik.Windows.Themes.Fluent;component/Themes/Telerik.Windows.Controls.Input.xaml" />
                <ResourceDictionary Source="/Telerik.Windows.Themes.Fluent;component/Themes/Telerik.Windows.Controls.Navigation.xaml" />
                <ResourceDictionary Source="/Telerik.Windows.Themes.Fluent;component/Themes/Telerik.Windows.Controls.GridView.xaml" />

                <ResourceDictionary Source="Assets/AppIcon.xaml" />
                <ResourceDictionary Source="Theming/WindowChromeStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
            <converters:EnumEqualsConverter x:Key="EnumEqualsConverter" />

            <!-- App palette tokens (fallbacks). These are used for WPF controls. -->
            <SolidColorBrush x:Key="AppBackgroundBrush" Color="#FF121212" />
            <SolidColorBrush x:Key="AppSurfaceBrush" Color="#FF1E1E1E" />
            <SolidColorBrush x:Key="AppForegroundBrush" Color="#FFF0F0F0" />
            <SolidColorBrush x:Key="AppSubtleForegroundBrush" Color="#FFBFBFBF" />
            <SolidColorBrush x:Key="AppBorderBrush" Color="#FF3A3A3A" />
            <SolidColorBrush x:Key="AppAccentBrush" Color="#FF2DB7FF" />

            <!-- Shared rounding + glow (kept subtle) -->
            <CornerRadius x:Key="AppCornerRadius" TopLeft="3" TopRight="3" BottomRight="3" BottomLeft="3" />

            <DropShadowEffect x:Key="AppGlowEffect"
                              BlurRadius="18"
                              ShadowDepth="0"
                              Opacity="0.45"
                              Color="#FF2DB7FF" />

            <!-- WPF control styling (minimal, token-based) -->
            <Style TargetType="{x:Type Window}">
                <Setter Property="Background" Value="{DynamicResource AppBackgroundBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
            </Style>

            <Style TargetType="{x:Type TextBlock}">
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
            </Style>

            <Style TargetType="{x:Type Label}">
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
            </Style>

            <Style TargetType="{x:Type StatusBar}">
                <Setter Property="Background" Value="{DynamicResource AppSurfaceBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
            </Style>

            <Style TargetType="{x:Type TextBox}">
                <Setter Property="Background" Value="{DynamicResource AppSurfaceBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource AppBorderBrush}" />
                <Setter Property="Padding" Value="8,4" />

                <!-- Ensure any text editors (including Telerik RadComboBox editable editor) render correctly in dark mode -->
                <Setter Property="CaretBrush" Value="{DynamicResource AppForegroundBrush}" />
                <Setter Property="SelectionBrush" Value="#55FFFFFF" />
                <Setter Property="SelectionTextBrush" Value="{DynamicResource AppForegroundBrush}" />
            </Style>

            <!-- NOTE: The app is standardized on Telerik inputs. Avoid styling WPF ComboBox. -->

            <Style TargetType="{x:Type Button}">
                <Setter Property="Background" Value="{DynamicResource AppSurfaceBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource AppBorderBrush}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Padding" Value="10,6" />
            </Style>

            <Style TargetType="{x:Type CheckBox}">
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
            </Style>

            <Style TargetType="{x:Type ListBox}">
                <Setter Property="Background" Value="{DynamicResource AppSurfaceBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource AppBorderBrush}" />
                <Setter Property="BorderThickness" Value="1" />
            </Style>

            <Style TargetType="{x:Type ListBoxItem}">
                <Setter Property="Padding" Value="6,4" />
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
                <Setter Property="Background" Value="Transparent" />
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="#1FFFFFFF" />
                    </Trigger>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="Background" Value="#33FFFFFF" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="{DynamicResource AppSubtleForegroundBrush}" />
                    </Trigger>
                </Style.Triggers>
            </Style>

            <Style TargetType="{x:Type ScrollViewer}">
                <Setter Property="Background" Value="Transparent" />
            </Style>

            <Style TargetType="{x:Type Separator}">
                <Setter Property="Background" Value="{DynamicResource AppBorderBrush}" />
            </Style>

            <!-- Telerik Grid: keep rectangular (no rounding), ensure colors are dark -->
            <Style TargetType="{x:Type telerik:RadGridView}">
                <Setter Property="AutoGenerateColumns" Value="False" />
                <Setter Property="IsReadOnly" Value="True" />
                <Setter Property="ShowGroupPanel" Value="False" />
                <Setter Property="CanUserFreezeColumns" Value="False" />
                <Setter Property="CanUserDeleteRows" Value="False" />
                <Setter Property="CanUserInsertRows" Value="False" />
                <Setter Property="CanUserReorderColumns" Value="True" />
                <Setter Property="CanUserResizeColumns" Value="True" />
                <Setter Property="CanUserSelect" Value="True" />
                <Setter Property="SelectionMode" Value="Single" />
                <Setter Property="SelectionUnit" Value="FullRow" />
                <Setter Property="IsFilteringAllowed" Value="True" />
                <Setter Property="FilteringMode" Value="FilterRow" />
                <Setter Property="RowIndicatorVisibility" Value="Collapsed" />
                <Setter Property="ShowColumnFooters" Value="False" />
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
                <Setter Property="Background" Value="{DynamicResource AppSurfaceBrush}" />
            </Style>

            <!-- Telerik GridView filtering (must come AFTER the generic RadToggleButton style so it wins) -->
            <Style x:Key="GridViewFilterMatchCase" TargetType="{x:Type telerik:RadToggleButton}" BasedOn="{StaticResource {x:Type telerik:RadToggleButton}}">
                <Setter Property="Visibility" Value="Collapsed" />
                <Setter Property="IsHitTestVisible" Value="False" />
                <Setter Property="Focusable" Value="False" />
                <Setter Property="Width" Value="0" />
                <Setter Property="Height" Value="0" />
                <Setter Property="Margin" Value="0" />
                <Setter Property="Padding" Value="0" />
            </Style>

            <!-- Some Telerik versions also expose this as a separate style key -->
            <Style x:Key="GridViewFilterRowMatchCase" TargetType="{x:Type telerik:RadToggleButton}" BasedOn="{StaticResource GridViewFilterMatchCase}" />

            <!-- Telerik Grid: softer separators (less prominent than default) -->
            <Style TargetType="{x:Type telerik:GridViewCell}">
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
                <Setter Property="Background" Value="{DynamicResource AppSurfaceBrush}" />
                <Setter Property="BorderBrush" Value="#FF3A3A3A" />
                <Setter Property="BorderThickness" Value="0,0,0,1" />
            </Style>

            <Style TargetType="{x:Type telerik:GridViewRow}">
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
                <Setter Property="Background" Value="{DynamicResource AppSurfaceBrush}" />
                <Setter Property="BorderBrush" Value="#FF2C2C2C" />
            </Style>

            <Style TargetType="{x:Type telerik:GridViewDataColumn}">
                <Setter Property="IsFilterable" Value="True" />
                <Setter Property="IsGroupable" Value="True" />
                <Setter Property="IsSortable" Value="True" />
                <Setter Property="IsResizable" Value="True" />
            </Style>

            <Style TargetType="{x:Type telerik:GridViewCheckBoxColumn}">
                <Setter Property="IsFilterable" Value="True" />
                <Setter Property="IsGroupable" Value="True" />
                <Setter Property="IsSortable" Value="True" />
                <Setter Property="IsResizable" Value="True" />
            </Style>

            <Style TargetType="{x:Type telerik:RadWatermarkTextBox}">
                <Setter Property="MinHeight" Value="30" />
                <Setter Property="Padding" Value="8,4" />
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
            </Style>

            <Style TargetType="{x:Type telerik:RadDateTimePicker}">
                <Setter Property="MinHeight" Value="30" />
                <Setter Property="Padding" Value="8,4" />
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
            </Style>

            <!-- Telerik ComboBox: ensure dropdown/popup background + item colors match dark app tokens -->
            <Style TargetType="{x:Type telerik:RadComboBox}" BasedOn="{StaticResource {x:Type telerik:RadComboBox}}">
                <Setter Property="Background" Value="{DynamicResource AppSurfaceBrush}" />
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource AppBorderBrush}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Padding" Value="6,2" />

                <Setter>
                    <Setter.Property>
                        <x:Static Member="theming:RadComboBoxThemeBridge.IsEnabledProperty" />
                    </Setter.Property>
                    <Setter.Value>True</Setter.Value>
                </Setter>
            </Style>

            <Style TargetType="{x:Type telerik:RadMaskedTextInput}">
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
            </Style>

            <!-- Telerik Grid header + filter UI: force light foreground for readability in dark mode -->
            <Style TargetType="{x:Type telerik:GridViewHeaderCell}">
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
            </Style>

            <!-- Filter buttons/glyphs in RadGridView are typically toggle buttons in this Telerik version -->
            <Style TargetType="{x:Type telerik:RadToggleButton}">
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
                <Setter Property="Background" Value="{DynamicResource AppSurfaceBrush}" />
                <Setter Property="BorderBrush" Value="{DynamicResource AppBorderBrush}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Padding" Value="10,6" />
                <Setter Property="MinHeight" Value="32" />
                <Setter Property="HorizontalContentAlignment" Value="Center" />
                <Setter Property="VerticalContentAlignment" Value="Center" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type telerik:RadToggleButton}">
                            <Border x:Name="Bd"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="16">
                                <Grid Margin="10,6">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="44" />
                                    </Grid.ColumnDefinitions>

                                    <ContentPresenter Grid.Column="0"
                                                      VerticalAlignment="Center"
                                                      RecognizesAccessKey="True" />

                                    <Grid Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Right" Width="44" Height="22">
                                        <Border x:Name="Track" Background="#FF2C2C2C" CornerRadius="11" />
                                        <Ellipse x:Name="Thumb" Fill="#FFE6E6E6" Width="18" Height="18" HorizontalAlignment="Left" Margin="2" />
                                    </Grid>
                                </Grid>
                            </Border>

                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="Track" Property="Background" Value="{DynamicResource AppAccentBrush}" />
                                    <Setter TargetName="Thumb" Property="HorizontalAlignment" Value="Right" />
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Bd" Property="BorderBrush" Value="{DynamicResource AppAccentBrush}" />
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter TargetName="Bd" Property="Opacity" Value="0.55" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Switch styling is opt-in via Style="{StaticResource AppToggleSwitchStyle}" -->
            <Style x:Key="AppToggleSwitchStyle" TargetType="{x:Type telerik:RadToggleButton}" BasedOn="{StaticResource {x:Type telerik:RadToggleButton}}">
                <Setter Property="Foreground" Value="{DynamicResource AppForegroundBrush}" />
                <Setter Property="Background" Value="Transparent" />
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="Padding" Value="0" />
                <Setter Property="MinHeight" Value="22" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type telerik:RadToggleButton}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="8" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <Grid Grid.Column="0" Width="44" Height="22" VerticalAlignment="Center" HorizontalAlignment="Left">
                                    <Border x:Name="Track" Background="#FF2C2C2C" CornerRadius="11" />
                                    <Ellipse x:Name="Thumb" Fill="#FFE6E6E6" Width="18" Height="18" HorizontalAlignment="Left" Margin="2" />
                                </Grid>

                                <ContentPresenter Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  RecognizesAccessKey="True" />
                            </Grid>

                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="Track" Property="Background" Value="{DynamicResource AppAccentBrush}" />
                                    <Setter TargetName="Thumb" Property="HorizontalAlignment" Value="Right" />
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Opacity" Value="0.55" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Application.Resources>
</Application>
