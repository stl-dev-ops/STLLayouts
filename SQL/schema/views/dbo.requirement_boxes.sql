SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
IF NOT EXISTS (SELECT * FROM sys.views WHERE object_id = OBJECT_ID(N'[dbo].[requirement_boxes]'))
EXEC dbo.sp_executesql @statement = N' create view requirement_boxes (off__ref, afg__ref, afg_oms2, afg_oms1, afg__rpn, art__ref, oplage__, perdoos, behoefte, datum) as  select v4vrs___.off__ref, v4vrs___.afg__ref, afgart__.afg_oms1, afgart__.afg_oms2, afgart__.afg__rpn, afgart__.art_ref2, v4vrs___.oplage__, aant__e2 perdoos,  round ((v4vrs___.oplage__/afgart__.aant__e2)+0.49,0) behoefte,  min(plandv__.datum___) datum  from v4vrs___, afgart__, plandv__ where v4vrs___.off__ref in (select ord__ref from plandv__ where toestand<3) and afgart__.afg__ref=v4vrs___.afg__ref and afgart__.art_ref2 in (select art__ref from artiky__ where art__srt=''a'') group by v4vrs___.off__ref, v4vrs___.afg__ref, afgart__.afg_oms1, afgart__.afg_oms2, afgart__.afg__rpn, afgart__.art_ref2, v4vrs___.oplage__, afgart__.aant__e2  union  select v4vrs___.off__ref, v4vrs___.afg__ref, afgart__.afg_oms1, afgart__.afg_oms2, afgart__.afg__rpn, afgart__.art_ref3, v4vrs___.oplage__, aant__e2*aant__e3 perdoos, round ((v4vrs___.oplage__/afgart__.aant__e2/afgart__.aant__e3)+0.49,0) behoefte, min(plandv__.datum___) datum  from v4vrs___, afgart__, plandv__ where v4vrs___.off__ref in (select ord__ref from plandv__ where toestand<3) and afgart__.afg__ref=v4vrs___.afg__ref and afgart__.art_ref3 in (select art__ref from artiky__ where art__srt=''a'') group by v4vrs___.off__ref, v4vrs___.afg__ref, afgart__.afg_oms1, afgart__.afg_oms2, afgart__.afg__rpn, afgart__.art_ref3, v4vrs___.oplage__, afgart__.aant__e2, afgart__.aant__e3  union  select v4vrs___.off__ref, v4vrs___.afg__ref, afgart__.afg_oms1, afgart__.afg_oms2, afgart__.afg__rpn, afgart__.art_ref4, v4vrs___.oplage__, aant__e2*aant__e3*aant__e4 perdoos,  round ((v4vrs___.oplage__/afgart__.aant__e2/afgart__.aant__e3/aant__e4)+0.49,0) behoefte, min(plandv__.datum___) datum  from v4vrs___, afgart__, plandv__ where v4vrs___.off__ref in (select ord__ref from plandv__ where toestand<3) and afgart__.afg__ref=v4vrs___.afg__ref and afgart__.art_ref4 in (select art__ref from artiky__ where art__srt=''a'') group by v4vrs___.off__ref, v4vrs___.afg__ref, afgart__.afg_oms1, afgart__.afg_oms2, afgart__.afg__rpn, afgart__.art_ref4, v4vrs___.oplage__, afgart__.aant__e2, afgart__.aant__e3, afgart__.aant__e4  union  select v4vrs___.off__ref, v4vrs___.afg__ref, afgart__.afg_oms1, afgart__.afg_oms2, afgart__.afg__rpn, afgart__.art_ref5, v4vrs___.oplage__, aant__e2*aant__e3*aant__e4*aant__e5 perdoos,  round ((v4vrs___.oplage__/afgart__.aant__e2/afgart__.aant__e3/aant__e4/aant__e5)+0.49,0) behoefte, min(plandv__.datum___) datum  from v4vrs___, afgart__, plandv__  where v4vrs___.off__ref in (select ord__ref from plandv__ where toestand<3) and afgart__.afg__ref=v4vrs___.afg__ref and afgart__.art_ref5 in (select art__ref from artiky__ where art__srt=''a'') group by v4vrs___.off__ref, v4vrs___.afg__ref, afgart__.afg_oms1, afgart__.afg_oms2, afgart__.afg__rpn, afgart__.art_ref5, v4vrs___.oplage__, afgart__.aant__e2, afgart__.aant__e3, afgart__.aant__e4,  afgart__.aant__e5
' 
